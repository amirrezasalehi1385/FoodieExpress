<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="rootPane" prefHeight="700.0" prefWidth="1000.0"
            style="-fx-background-color: linear-gradient(to bottom, #667eea, #764ba2);"
            xmlns="http://javafx.com/javafx/24.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.FoodOrder.client.controllers.AvailableDeliveriesController">

    <!-- External CSS -->
    <stylesheets>
        <URL value="@available-deliveries.css" />
    </stylesheets>

    <!-- Top section: Header -->
    <top>
        <VBox spacing="15.0" style="-fx-background-color: rgba(255,255,255,0.95); -fx-background-radius: 0 0 20 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 3);">
            <padding>
                <Insets top="20" right="40" bottom="20" left="40" />
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="15.0">
                <VBox spacing="5.0">
                    <Label text="ðŸšš Available Deliveries" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                        <font>
                            <Font name="System Bold" size="36.0" />
                        </font>
                    </Label>
                    <Label text="Find the perfect delivery opportunity for you" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d; -fx-font-style: italic;" />
                </VBox>
                <Region HBox.hgrow="ALWAYS" />
            </HBox>
        </VBox>
    </top>

    <!-- Center section: Main content -->
    <center>
        <StackPane style="-fx-padding: 20;">
            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                        style="-fx-background-color: transparent; -fx-background: transparent; -fx-border-color: transparent;">
                <content>
                    <VBox alignment="TOP_CENTER" spacing="20.0">
                        <padding>
                            <Insets top="10.0" right="20.0" bottom="30.0" left="20.0" />
                        </padding>

                        <!-- Section title -->
                        <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-background-color: rgba(255,255,255,0.9); -fx-background-radius: 15; -fx-padding: 20 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                            <Label text="ðŸ“‹ Delivery Opportunities" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                            <Region HBox.hgrow="ALWAYS" />
                        </HBox>

                        <!-- Accordion: Finding courier -->
                        <Accordion fx:id="findingCourierAccordion" prefWidth="900.0" styleClass="custom-accordion">
                            <panes>
                                <TitledPane fx:id="findingLoadingPane" styleClass="loading-pane" text="ðŸ”„ Loading finding courier opportunities...">
                                    <content>
                                        <VBox alignment="CENTER" spacing="20.0" style="-fx-padding: 30;">
                                            <HBox alignment="CENTER" spacing="10.0">
                                                <Region prefWidth="10.0" prefHeight="10.0" style="-fx-background-color: #3498db; -fx-background-radius: 5;" />
                                                <Region prefWidth="10.0" prefHeight="10.0" style="-fx-background-color: #9b59b6; -fx-background-radius: 5;" />
                                                <Region prefWidth="10.0" prefHeight="10.0" style="-fx-background-color: #e74c3c; -fx-background-radius: 5;" />
                                            </HBox>
                                            <Label text="Please wait while we fetch finding courier opportunities..."
                                                   style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                            </panes>
                        </Accordion>

                        <!-- Accordion: On the way deliveries -->
                        <Accordion fx:id="onTheWayAccordion" prefWidth="900.0" styleClass="custom-accordion">
                            <panes>
                                <TitledPane fx:id="onTheWayLoadingPane" styleClass="loading-pane" text="ðŸ”„ Loading on the way deliveries...">
                                    <content>
                                        <VBox alignment="CENTER" spacing="20.0" style="-fx-padding: 30;">
                                            <HBox alignment="CENTER" spacing="10.0">
                                                <Region prefWidth="10.0" prefHeight="10.0" style="-fx-background-color: #3498db; -fx-background-radius: 5;" />
                                                <Region prefWidth="10.0" prefHeight="10.0" style="-fx-background-color: #9b59b6; -fx-background-radius: 5;" />
                                                <Region prefWidth="10.0" prefHeight="10.0" style="-fx-background-color: #e74c3c; -fx-background-radius: 5;" />
                                            </HBox>
                                            <Label text="Please wait while we fetch on the way deliveries..."
                                                   style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                            </panes>
                        </Accordion>

                        <!-- Empty state when no deliveries are available -->
                        <VBox fx:id="emptyStateContainer" alignment="CENTER" spacing="15.0"
                              visible="false"
                              style="-fx-background-color: rgba(255,255,255,0.9); -fx-background-radius: 15; -fx-padding: 40; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">
                            <Label text="ðŸ“¦" style="-fx-font-size: 48px;" />
                            <Label text="No deliveries available at the moment"
                                   style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                            <Label text="New delivery opportunities will appear here automatically"
                                   style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" />
                            <Button text="ðŸ”„ Check Again"
                                    onAction="#handleCheckAgain"
                                    style="-fx-background-color: linear-gradient(to bottom right, #74b9ff, #0984e3); -fx-text-fill: white; -fx-background-radius: 25; -fx-padding: 12 24; -fx-font-weight: bold; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 2);" />
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>
        </StackPane>
    </center>

    <!-- Footer section -->
    <bottom>
        <fx:include source="footer.fxml" />
    </bottom>
</BorderPane>
